---- SUMMARY ----
Ruff errors: 18606
Mypy errors: 0
Pytest result: FAILED tests/runtime/test_exception_narrowing_df_main.py::test_data_fetcher_json_decode_is_valueerror_only - assert None !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 4 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! xdist.dsession.Interrupted: stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 
Make test-all tail:
FAILED tests/utils/test_retry.py::test_retry_succeeds_and_sleeps - assert 0 == 2
FAILED tests/utils/test_retry.py::test_backoff_caps - IndexError: list index out of range
FAILED tests/test_no_root_imports.py::test_no_root_level_imports_of_migrated_modules - AssertionError: Root imports are no lo...
FAILED tests/test_package_first_smoke.py::test_ai_trading_module_imports - ModuleNotFoundError: No module named 'ai_trading.t...
FAILED tests/test_package_first_smoke.py::test_ai_trading_init_exports - AssertionError: assert False
FAILED tests/test_parameter_optimization.py::test_kelly_parameters_optimization - AssertionError: Expected 0.15, got 0.3
FAILED tests/test_parameter_optimization.py::test_adaptive_sizing_optimization - TypeError: object() takes no arguments
FAILED tests/test_parameter_optimization.py::test_execution_algorithm_optimization - NameError: name 'MockOrderManager' is no...
FAILED tests/test_critical_trading_issues.py::TestOrderExecutionTracking::test_safe_submit_order_quantity_validation - Attrib...
FAILED tests/test_critical_trading_issues.py::TestLiquidityManagement::test_conservative_spread_threshold - NotImplementedError
FAILED tests/test_data_cache.py::test_disk_cache_basic - assert None is not None
FAILED tests/test_data_fetch.py::test_get_bars_df_spy_day - requests.exceptions.HTTPError: 403 Client Error: Forbidden for ur...
FAILED tests/test_data_fetcher.py::test_get_minute_df - NotImplementedError
FAILED tests/test_data_fetcher.py::test_subscription_error_logged - AttributeError: <module 'ai_trading.data_fetcher' from '/...
FAILED tests/test_data_fetcher.py::test_fetch_bars_retry_invalid_feed - TypeError: _fetch_bars() takes 4 positional arguments...
FAILED tests/test_data_fetcher.py::test_finnhub_403_yfinance - AttributeError: None has no attribute 'download'
FAILED tests/test_data_fetcher.py::test_fetch_bars_empty_raises - TypeError: _fetch_bars() takes 4 positional arguments but 5...
FAILED tests/test_data_fetcher.py::test_fetch_minute_df_safe_handles_empty - ai_trading.core.bot_engine.DataFetchError: Minut...
FAILED tests/test_ml_model_extra.py::test_fit_and_predict - TypeError: '>=' not supported between instances of 'MLModel' and ...
ERROR tests/test_institutional_kelly.py::TestKellyCriterion::test_kelly_initialization - NameError: name '_DEFAULT_CONFIG' is...
ERROR tests/test_institutional_kelly.py::TestKellyCriterion::test_basic_kelly_calculation - NameError: name '_DEFAULT_CONFIG'...
ERROR tests/test_institutional_kelly.py::TestKellyCriterion::test_kelly_with_max_fraction_cap - NameError: name '_DEFAULT_CON...
ERROR tests/test_institutional_kelly.py::TestKellyCriterion::test_kelly_negative_expectancy - NameError: name '_DEFAULT_CONFI...
ERROR tests/test_institutional_kelly.py::TestKellyCriterion::test_kelly_invalid_inputs - NameError: name '_DEFAULT_CONFIG' is...
ERROR tests/test_institutional_kelly.py::TestKellyCriterion::test_calculate_from_returns - NameError: name '_DEFAULT_CONFIG' ...
ERROR tests/test_institutional_kelly.py::TestKellyCriterion::test_insufficient_sample_size - NameError: name '_DEFAULT_CONFIG...
ERROR tests/test_institutional_kelly.py::TestKellyCriterion::test_no_wins_or_losses - NameError: name '_DEFAULT_CONFIG' is no...
ERROR tests/test_institutional_kelly.py::TestKellyCriterion::test_fractional_kelly - NameError: name '_DEFAULT_CONFIG' is not...
ERROR tests/test_institutional_kelly.py::TestKellyCriterion::test_kelly_with_confidence - NameError: name '_DEFAULT_CONFIG' i...
ERROR tests/test_institutional_kelly.py::TestKellyCalculator::test_kelly_calculator_initialization - NameError: name '_DEFAUL...
ERROR tests/test_institutional_kelly.py::TestKellyCalculator::test_portfolio_kelly_calculation - NameError: name '_DEFAULT_CO...
ERROR tests/test_institutional_kelly.py::TestKellyCalculator::test_dynamic_kelly_adjustment - NameError: name '_DEFAULT_CONFI...
ERROR tests/test_institutional_kelly.py::TestKellyCalculator::test_kelly_with_correlation - NameError: name '_DEFAULT_CONFIG'...
ERROR tests/test_institutional_kelly.py::TestKellyCalculator::test_calculation_history_recording - NameError: name '_DEFAULT_...
ERROR tests/test_main_extended2.py::test_validate_environment_missing - AttributeError: 'NoneType' object has no attribute 'W...
ERROR tests/test_portfolio_integration.py::TestPortfolioSignalFiltering::test_portfolio_signal_filtering_basic - NameError: n...
ERROR tests/test_portfolio_integration.py::TestPortfolioSignalFiltering::test_portfolio_signal_filtering_with_positions - Nam...
ERROR tests/test_portfolio_integration.py::TestPortfolioSignalFiltering::test_portfolio_signal_filtering_empty_signals - Name...
ERROR tests/test_portfolio_integration.py::TestPortfolioSignalFiltering::test_portfolio_signal_filtering_invalid_signals - Na...
ERROR tests/test_portfolio_integration.py::TestPortfolioSignalFiltering::test_churn_reduction_effectiveness - NameError: name...
ERROR tests/test_portfolio_integration.py::TestPortfolioSignalFiltering::test_portfolio_optimization_fallback - NameError: na...
ERROR tests/test_portfolio_integration.py::TestPortfolioRebalancingIntegration::test_rebalancing_integration - NameError: nam...
ERROR tests/test_portfolio_optimization.py::TestPortfolioOptimizer::test_portfolio_kelly_efficiency_calculation - NameError: ...
ERROR tests/test_portfolio_optimization.py::TestPortfolioOptimizer::test_correlation_impact_calculation - NameError: name '_D...
ERROR tests/test_portfolio_optimization.py::TestPortfolioOptimizer::test_trade_impact_evaluation - NameError: name '_DEFAULT_...
ERROR tests/test_portfolio_optimization.py::TestPortfolioOptimizer::test_portfolio_decision_making - NameError: name '_DEFAUL...
ERROR tests/test_portfolio_optimization.py::TestPortfolioOptimizer::test_rebalance_trigger_logic - NameError: name '_DEFAULT_...
ERROR tests/test_portfolio_optimization.py::TestIntegration::test_integrated_portfolio_decision_workflow - NameError: name '_...
ERROR tests/test_portfolio_optimization.py::TestIntegration::test_churn_reduction_validation - NameError: name '_DEFAULT_CONF...
make: *** [Makefile:29: test-all] Error 1
