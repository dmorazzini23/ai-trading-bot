## Development & test dependencies

# --- Core dev/test tools ---
pytest>=8.3
pytest-xdist>=3.6
pytest-cov>=5.0,<6.0
pytest-mock>=3.12,<4  # AI-AGENT-REF: mocker fixture
flake8
isort
pydantic>=2.6
pydantic-settings>=2.2

# --- Test utilities ---
freezegun>=1.4,<2  # AI-AGENT-REF: time freezing
requests-mock>=1.12,<2  # AI-AGENT-REF: HTTP isolation
filelock>=3.12,<4  # AI-AGENT-REF: file locking

# Market / data tooling used only in tests/CI
pandas>=2.3
pandas_ta==0.3.14b0
pandas-market-calendars==4.4.1
exchange-calendars
cachetools>=5.3,<6.0
# yfinance requires websockets>=13 which conflicts with alpaca-trade-api<11
# move to optional extra or install only locally when needed
# yfinance>=0.2.40,<0.3
requests>=2.31,<3
urllib3>=1.26,<2  # AI-AGENT-REF: align with Alpaca SDK
certifi>=2023.7.22
charset-normalizer>=3.2,<4
idna>=3.4,<4
joblib>=1.3,<2
tenacity

# Web stack used in app/tests
Flask>=3,<4
beautifulsoup4>=4.12,<5
lxml>=5,<6

# System/process utilities used by perf checks & test helpers (CI-only)
# Pin to <6 to avoid upcoming API changes that may break older helpers.
psutil>=5.9,<6
tzlocal>=5.2,<6
portalocker
schedule
scikit-learn
pybreaker
finnhub-python
prometheus-client

# Broker SDK
alpaca-trade-api==3.2.0
websockets<11

# Keep CI/dev on a NumPy that still exports `NaN` (NumPy 2.0 removed it).
# 1.26.4 supports Python 3.12 and is broadly compatible with pandas & pandas-ta.
numpy==1.26.4
# Async test dependencies
pytest-asyncio>=0.23,<0.24
anyio>=4,<5
aiohttp>=3.9,<3.10
pre-commit>=3.7,<4
detect-secrets==1.5.0
libcst>=1.1.0  # AI-AGENT-REF: codemod support
ruff>=0.5,<1
black>=24,<25
mypy>=1.10,<2
