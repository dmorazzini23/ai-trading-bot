# AI Trading Bot Environment Configuration
# Copy this file to .env and fill in your actual values
# Never commit the .env file with real credentials

# === ALPACA TRADING API ===
# Get these from https://app.alpaca.markets/paper/dashboard/overview
# Choose exactly one auth method below.
# Option 1: OAuth token (comment out API key/secret lines)
# ALPACA_OAUTH=your_oauth_token_here

# Option 2: API key + secret (leave ALPACA_OAUTH commented out)
ALPACA_API_KEY=your_alpaca_api_key_here
ALPACA_SECRET_KEY=your_alpaca_secret_key_here
ALPACA_BASE_URL=https://paper-api.alpaca.markets
DATA_LOOKBACK_DAYS_DAILY=200
DATA_LOOKBACK_DAYS_MINUTE=5
TZ=UTC
MARKET_CALENDAR=XNYS

# === TRADING CONFIGURATION ===
# Trading mode (use this; BOT_MODE is deprecated)
TRADING_MODE=balanced                # Options: aggressive, balanced, conservative
# Broker mode is inferred from ALPACA_BASE_URL or APP_ENV
# Use https://paper-api.alpaca.markets for paper trading (default)
# Use https://api.alpaca.markets for live trading (USE WITH EXTREME CAUTION)
SHADOW_MODE=false                   # Set to true for simulation without actual trades

# === WEBHOOK AND API ===
WEBHOOK_SECRET=your_webhook_secret_here
FLASK_PORT=5000

# === EXTERNAL DATA APIS ===
# Optional: Get from https://newsapi.org/
NEWS_API_KEY=your_news_api_key_here

# Optional: Get from https://finnhub.io/
FINNHUB_API_KEY=your_finnhub_api_key_here

# === LOGGING AND MONITORING ===
BOT_LOG_FILE=logs/trading.log
RUN_HEALTHCHECK=1

# === SAFETY FEATURES ===
# Maximum daily loss as percentage of portfolio (recommended: 0.05 = 5%)
MAX_DAILY_LOSS=0.05

# Absolute USD cap per position (derived from CAPITAL_CAP if unset)
MAX_POSITION_SIZE=5000
# Optional: percentage cap per position (0.20 = 20% of portfolio)
# MAX_POSITION_SIZE_PCT=0.20

# === DEVELOPMENT OPTIONS ===
# Set to true during testing to bypass some safety checks
TESTING=false
FORCE_MARKET_OPEN=false

# === ADVANCED SETTINGS ===
# Scheduler sleep interval in seconds
SCHEDULER_SLEEP_SECONDS=60

# Random seed for reproducible results (optional)
SEED=42

# Log verbosity (true for debug mode)
VERBOSE=false

# ---- Risk Controls ----
# Fraction of equity usable per cycle (0,1]; default 0.04 if unset
CAPITAL_CAP=0.04

# Max fraction of equity at risk per position (0,1]; default 0.05 if unset
DOLLAR_RISK_LIMIT=0.05

# ---- Market Data ----
# Alpaca data feed: iex (free) or sip (subscription). Default: iex
ALPACA_DATA_FEED=iex

# Adjustments for bars: all | raw. Default: all
ALPACA_ADJUSTMENT=all

# === API SERVER ===
# Host/port for the Flask control/health API. Defaults are safe for Docker/VMs.
API_HOST=0.0.0.0
API_PORT=9001
